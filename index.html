<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ChromaCheck - WCAG Contrast Checker</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- SVG Filters for Color Blindness -->
    <svg style="display: none">
      <defs>
        <!-- Dichromacy -->
        <filter id="protanopia">
          <feColorMatrix
            type="matrix"
            values="0.567, 0.433, 0, 0, 0  0.558, 0.442, 0, 0, 0  0, 0.242, 0.758, 0, 0  0, 0, 0, 1, 0"
          />
        </filter>
        <filter id="deuteranopia">
          <feColorMatrix
            type="matrix"
            values="0.625, 0.375, 0, 0, 0  0.7, 0.3, 0, 0, 0  0, 0.3, 0.7, 0, 0  0, 0, 0, 1, 0"
          />
        </filter>
        <filter id="tritanopia">
          <feColorMatrix
            type="matrix"
            values="0.95, 0.05, 0, 0, 0  0, 0.433, 0.567, 0, 0  0, 0.475, 0.525, 0, 0  0, 0, 0, 1, 0"
          />
        </filter>
        <!-- Anomalous Trichromacy -->
        <filter id="protanomaly">
          <feColorMatrix
            type="matrix"
            values="0.817, 0.183, 0, 0, 0  0.333, 0.667, 0, 0, 0  0, 0.125, 0.875, 0, 0  0, 0, 0, 1, 0"
          />
        </filter>
        <filter id="deuteranomaly">
          <feColorMatrix
            type="matrix"
            values="0.8, 0.2, 0, 0, 0  0.258, 0.742, 0, 0, 0  0, 0.142, 0.858, 0, 0  0, 0, 0, 1, 0"
          />
        </filter>
        <filter id="tritanomaly">
          <feColorMatrix
            type="matrix"
            values="0.967, 0.033, 0, 0, 0  0, 0.733, 0.267, 0, 0  0, 0.183, 0.817, 0, 0  0, 0, 0, 1, 0"
          />
        </filter>
        <!-- Monochromacy -->
        <filter id="achromatopsia">
          <feColorMatrix
            type="matrix"
            values="0.299, 0.587, 0.114, 0, 0  0.299, 0.587, 0.114, 0, 0  0.299, 0.587, 0.114, 0, 0  0, 0, 0, 1, 0"
          />
        </filter>
        <filter id="achromatomaly">
          <feColorMatrix
            type="matrix"
            values="0.618, 0.320, 0.062, 0, 0  0.163, 0.775, 0.062, 0, 0  0.163, 0.320, 0.516, 0, 0  0, 0, 0, 1, 0"
          />
        </filter>
      </defs>
    </svg>

    <div class="background-blobs">
      <div class="blob blob-1"></div>
      <div class="blob blob-2"></div>
      <div class="blob blob-3"></div>
    </div>

    <div class="container">
      <header>
        <h1>ChromaCheck.</h1>
        <p>
          Ensure your color palettes are accessible. Add 2 to 9 colors to
          compare their WCAG contrast ratios instantly.
        </p>
      </header>

      <main>
        <section class="controls glass-panel">
          <div class="color-inputs" id="color-inputs">
            <!-- Color inputs will be injected here by JS -->
          </div>
          <div class="actions">
            <button
              type="button"
              id="settings-btn"
              class="btn btn-secondary"
              aria-label="Settings"
              title="Settings"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <circle cx="12" cy="12" r="3"></circle>
                <path
                  d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"
                ></path>
              </svg>
            </button>

            <button type="button" id="add-color-btn" class="btn btn-primary">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
              Add Color
            </button>
            <span id="color-count-indicator" class="count-indicator"
              >3/9 Colors</span
            >
          </div>
        </section>

        <section class="results">
          <div class="results-header">
            <h2>Contrast Combinations</h2>
            <div class="results-tools">
              <div
                class="legend"
                id="filter-legend"
                role="group"
                aria-label="Filter combinations by WCAG 2.1 level"
              >
                <button
                  type="button"
                  class="badge badge-aaa"
                  data-filter="AAA"
                  aria-pressed="true"
                >
                  AAA
                </button>
                <button
                  type="button"
                  class="badge badge-aa"
                  data-filter="AA"
                  aria-pressed="true"
                >
                  AA
                </button>
                <button
                  type="button"
                  class="badge badge-large"
                  data-filter="AA Large"
                  aria-pressed="true"
                >
                  AA LARGE
                </button>
                <button
                  type="button"
                  class="badge badge-fail"
                  data-filter="Fail"
                  aria-pressed="true"
                >
                  FAIL
                </button>
              </div>
              <label class="apca-mode-toggle" for="apca-informational-toggle">
                <input type="checkbox" id="apca-informational-toggle" checked />
                <span>APCA informational only</span>
              </label>
            </div>
          </div>

          <!-- The matrix/grid of combinations will be injected here -->
          <div id="combinations-grid" class="combinations-grid"></div>

          <!-- Acronym Glossary Accordion -->
          <details class="glossary-accordion glass-panel">
            <summary>
              <span class="summary-title">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="10"></circle>
                  <line x1="12" y1="16" x2="12" y2="12"></line>
                  <line x1="12" y1="8" x2="12.01" y2="8"></line>
                </svg>
                Glossary of Terms
              </span>
              <svg class="chevron" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
            </summary>
            <div class="glossary-content">
              <dl>
                <div>
                  <dt>WCAG 2.1</dt>
                  <dd>Web Content Accessibility Guidelines. The current global standard. Calculates contrast using a simple relative luminance ratio ranging from 1:1 to 21:1.</dd>
                </div>
                <div>
                  <dt>APCA (WCAG 3.0)</dt>
                  <dd>Advanced Perceptual Contrast Algorithm. The modern standard slated for WCAG 3.0. It uses "polarity-aware" math (distinguishing dark-on-light vs light-on-dark) to produce a Lightness Contrast (<strong>Lc</strong>) score from 0 to ~108.</dd>
                </div>
                <div>
                  <dt>AAA / AA</dt>
                  <dd>Compliance levels. <strong>AAA</strong> is the gold standard for high accessibility. <strong>AA</strong> is the acceptable minimum for most legal and professional requirements.</dd>
                </div>
                <div>
                  <dt>AA Large</dt>
                  <dd>A passing grade specifically for large typography (typically 18pt+ or 14pt+ bold). These colors lack the contrast for body text but are safe for large headings.</dd>
                </div>
              </dl>
            </div>
          </details>
        </section>
      </main>

      <!-- Settings Popover -->
      <div
        id="settings-popover"
        class="popover glass-panel"
        role="dialog"
        aria-modal="true"
        aria-labelledby="settings-title"
        aria-hidden="true"
      >
        <div class="popover-header">
          <h3 id="settings-title">Settings</h3>
          <button
            type="button"
            id="close-settings-btn"
            class="close-btn"
            aria-label="Close"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>
        <div class="popover-content">
          <div class="setting-group">
            <label for="color-blindness-select">Simulation Filter</label>
            <select id="color-blindness-select" class="custom-select">
              <optgroup label="None">
                <option value="none">Normal Vision</option>
              </optgroup>
              <optgroup label="Dichromacy (Severe)">
                <option value="protanopia">Protanopia (Red-blind)</option>
                <option value="deuteranopia">Deuteranopia (Green-blind)</option>
                <option value="tritanopia">Tritanopia (Blue-blind)</option>
              </optgroup>
              <optgroup label="Anomalous Trichromacy (Mild)">
                <option value="protanomaly">Protanomaly (Red-weak)</option>
                <option value="deuteranomaly">
                  Deuteranomaly (Green-weak)
                </option>
                <option value="tritanomaly">Tritanomaly (Blue-weak)</option>
              </optgroup>
              <optgroup label="Monochromacy">
                <option value="achromatopsia">Achromatopsia (No color)</option>
                <option value="achromatomaly">
                  Achromatomaly (Color-weak)
                </option>
              </optgroup>
            </select>
          </div>
        </div>
      </div>

      <footer>
        <p>
          Calculates contrast ratios using the
          <a
            href="https://www.w3.org/TR/WCAG21/#dfn-contrast-ratio"
            target="_blank"
            rel="noopener"
            >WCAG 2.1 specifications</a
          >.
        </p>
      </footer>
    </div>

    <script src="script.js"></script>
  </body>
</html>
